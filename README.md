# 汽水音乐自动化脚本

一个用于自动化汽水音乐App任务操作的Python脚本，通过图像识别技术实现自动点击和任务完成。

## 功能特性

- 🚀 自动启动iPhone镜像应用
- 🎯 基于图像识别的自动化操作
- 📱 支持汽水音乐App的任务自动完成
- 🔄 自动处理直播界面跳转
- 🎁 自动领取任务奖励
- ⏰ 智能等待和随机延迟机制

## 依赖环境

### 系统要求
- macOS系统
- Python 3.6+

### 依赖库
```bash
pip install opencv-python
pip install pillow
pip install pyautogui
pip install numpy
```

## 项目结构

```
qishui/
├── main.py          # 主程序文件
├── images/          # 图片资源文件夹
│   ├── finished.png # 任务完成标识图片
│   ├── success.png  # 成功按钮图片
│   ├── reward.png   # 奖励按钮图片
│   ├── speaker.png  # 喇叭图标图片
│   ├── guan-zhu.png # 关注按钮图片
│   └── gz-close.png # 直播关闭按钮图片
└── README.md        # 项目说明文档
```

## 使用方法

### 1. 准备工作
- 确保已安装所有依赖库
- 确保系统已开启"辅助功能"权限，允许Python脚本控制鼠标和键盘
- 确保iPhone镜像功能正常可用

### 2. 运行脚本
```bash
python main.py
```

### 3. 脚本功能
脚本将自动执行以下操作：
1. 启动iPhone镜像应用
2. 等待应用加载完成
3. 循环检测和处理以下情况：
   - 查找并点击成功按钮
   - 处理直播界面跳转
   - 领取任务奖励
   - 点击喇叭图标继续任务
4. 检测任务完成状态并自动停止

## 主要功能模块

### 图像识别
- `find_image_on_screen()`: 在屏幕上查找指定图片的位置
- 支持自定义匹配阈值和搜索区域
- 自动处理不同屏幕分辨率和缩放比例

### 应用控制
- `call_iphone()`: 通过AppleScript启动iPhone镜像应用
- 自动设置应用窗口位置
- 支持多语言环境下的应用识别

### 自动化流程
- `loop_process()`: 主循环处理逻辑
- 智能任务状态检测
- 自动错误恢复机制

## 配置说明

### 图像匹配阈值
默认匹配阈值为0.8，可在函数调用时调整：
```python
position = find_image_on_screen("images/success.png", threshold=0.9)
```

### 延迟设置
- 随机延迟：1-10秒
- 固定延迟：根据操作类型调整
- 可根据需要修改延迟参数

## 注意事项

⚠️ **重要提醒**
- 本脚本仅用于学习和研究目的
- 请确保遵守相关应用的使用条款
- 建议在测试环境中使用
- 使用前请备份重要数据

## 故障排除

### 常见问题
1. **图片识别失败**: 检查images文件夹中的图片文件是否完整
2. **应用启动失败**: 确认iPhone镜像功能是否正常
3. **权限错误**: 检查系统辅助功能权限设置

### 调试模式
脚本会输出详细的执行日志，便于问题排查和调试。

## 更新日志

- v1.0: 初始版本，支持基本自动化功能
- v1.1: 优化图像识别精度，增加错误处理
- v1.2: 重构项目结构，图片文件统一管理

## 许可证

本项目仅供学习交流使用，请勿用于商业用途。